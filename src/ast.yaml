namespace:
    name: nls
visitors:
  - name: syntax_checker
  - name: type_checker
  - name: evaluator
  - name: dotifier
nodes:
# Literals
  - name: bul
    constr_lval: |
        _variant = new Variant;
        _variant->value.bul = lval[0] == 't';
        _variant->value_type = NLS_BUL;
    evaluator: variant

  - name: i32
    constr_lval: |
        _variant = new Variant;
        _variant->value.i32 = atoi(lval);
        _variant->value_type = NLS_I32;
    evaluator: variant

  - name: i64
    constr_lval: |
        _variant = new Variant;
        _variant->value.i64 = atol(lval);
        _variant->value_type = NLS_I64;
    evaluator: variant

  - name: r32
    constr_lval: |
        _variant = new Variant;
        _variant->value.r32 = atof(lval);
        _variant->value_type = NLS_R32;
    evaluator: variant

  - name: r64
    constr_lval: |
        _variant = new Variant;
        _variant->value.r64 = atof(lval);
        _variant->value_type = NLS_R64;
    evaluator: variant

  - name: str
    constr_lval: |
        _variant = new Variant;
        _variant->value.str = new string(lval+1, strlen(lval)-2);
        _variant->value_type = NLS_STR;
    evaluator: variant

# Comment
  - name: comment
    constr_lval: |
        _variant = new Variant;
        _variant->value.str = new string(lval);
        _variant->value_type = NLS_STR;
    evaluator: variant

# Identifier
  - name: ident
    constr_lval: |
        _variant = new Variant;
        _variant->value.str = new string(lval);
        _variant->value_type = NLS_STR;
# Expressions - Arithmetic
  - name: add
    evaluator: expr
  - name: sub
  - name: mul
  - name: div
  - name: mod
  - name: pow
  - name: exp
  - name: sqrt
  - name: abs
  - name: max
  - name: min
  - name: log
  - name: log2
  - name: log10
  - name: ceil
  - name: floor
  - name: trunc
  - name: isnan
  - name: isinf
# Expressions - Trigonometri
  - name: sin
  - name: cos
  - name: tan
  - name: asin
  - name: acos
  - name: atan
  - name: asinh
  - name: acosh
  - name: atanh
# Expressions - Comparison
  - name: equal
  - name: not_equal
  - name: lthan
  - name: lthan_equal
  - name: gthan
  - name: gthan_equal
# Expressions - Logical
  - name: and
  - name: or
  - name: xor
  - name: not
# Expressions - Bitwise
  - name: bw_and
  - name: bw_or
  - name: bw_xor
  - name: bw_not
  - name: bw_lshift
  - name: bw_rshift
# Expressions - Function call, arguments and accessor
  - name: call
  - name: arg_list
  - name: accessor
# Expressions - Constructors
  - name: as
    evaluator: manual
  - name: shape
    evaluator: manual
  - name: range
  - name: new
# Statements
  - name: alias
  - name: assign
  - name: query
    evaluator: custom
# Statements - Organization
  - name: import
  - name: module
  - name: block
  - name: stmt
  - name: stmt_list
    evaluator: custom
# Statements - Control
  - name: while
    evaluator: custom
  - name: break
    evaluator: custom
  - name: continue
    evaluator: custom
  - name: when
  - name: case_list
  - name: is
  - name: otherwise
  - name: return
# Statements - Definitions
  - name: record
  - name: record_def
  - name: attr
  - name: attr_list
  - name: function_def
  - name: function_body
  - name: param
  - name: param_list
# Misc
  - name: noop
  - name: empty
  - name: anon
